---
title: sqlBuild
date: 2020-05-05 20:58:01
categories: 
    - 数据库
tags: 
    - 数据库设计
---

# 概述

特点：三分技术、七分管理、十二分基础数据

![阶段流程](Y:\hexoBlog\source\_posts\2020-05-05-sqlBuild\jieduanliucheng.png)

![阶段设计](Y:\hexoBlog\source\_posts\2020-05-05-sqlBuild\jieduansheji.png)

![阶段模型](Y:\hexoBlog\source\_posts\2020-05-05-sqlBuild\jieduanmoxing.png)

# 需求分析

- 数据项：不可再分的数据单位
- 数据结构：反映了数据之间的组合关系
- 数据流：数据结构在系统内传输的路径
- 数据存储：数据结构停留或保存的地方，也是数据流的来源和去向之一
- 处理过程：一般用判定表或判定树来描述

# 概念结构设计

特点

- 能真实、充分地反映真实世界，是现实世界的一个真实模型
- 易于理解，可以用它和不熟悉计算机的用户交换意见
- 易于更改，当应用环境和应用要求改变时容易对概念模型修改和扩充
- 易于向关系、网状、层次等各种数据模型转换。

关系

* 一个

  ![image-20200505212325728](Y:\hexoBlog\source\_posts\2020-05-05-sqlBuild\yige.png)

* 两者之间

  * 一对一 ==>1:1 
  * 一对多 ==> 1:n
  * 多对多 ==> n:m

  ![image-20200505212342348](Y:\hexoBlog\source\_posts\2020-05-05-sqlBuild\liangge.png)

* 两个以上

  ![image-20200505212437426](Y:\hexoBlog\source\_posts\2020-05-05-sqlBuild\duoge.png)

图形语言

- 实体型——矩形
- 属性——椭圆形
- 联系——菱形

# 逻辑结构设计

E-R图关系模型的转换

- 一个1:1联系可以转换为一个独立的关系模式，也可以与任意一端对应的关系模式合并
- 一个1:n联系可以转换为一个独立的关系模式，也可以于任意n端对应的关系模式合并
- 一个m:n联系转换为一个关系模式
- 三个或三个以上实体间的一个多元联系可以转换为一个关系模式
- 具有相同码的关系模式可合并

数据模型的优化

设计用户子模式

# 物理结构设计

目的：为给定的逻辑数据模型选取一个最合适应用要求的物理结构的过程。

过程

- 确定数据库的物理结构
- 对物理结构进行评价

数据库物理设计的内容和方法

- 查询
  - 查询的关系
  - 查询条件所涉及的属性
  - 连接条件所涉及的属性
  - 查询的投影属性
- 更新
  - 被更新的关系
  - 每个关系的更新操作条件所涉及的属性
  - 修改操作要改变的属性值

关系模式存取方法选择

- 索引方法
  - B+树索引存取
    - 如果一个属性经常在查询条件中出现，则考虑这个属性上建立索引
    - 如果一个属性经常作为最大值和最小值等聚集函数的参数，则考虑在这个属性上建立索引
    - 如果一个属性经常在连接操作的连接条件中出现，则考虑在这个属性上建立索引
  - hash索引存取方法
    - 一个关系的大小可预知，而且不变
    - 关系的大小动态改变，但数据库管理系统提供了动态hash存取方法
- 聚簇方法
  - 为了提高某个属性的查询速度，把这个这些属性上具有相同值的元组集中存放在连续的物理块中称为聚簇，该属性称为聚簇码
  - 设计候选聚簇
    - 对经常在一起进行连接操作的关系可以建立聚簇
    - 如果一个关系的一组属性经常出现在相等比较条件中，则该单个关系可建立聚簇
    - 如果一个关系的一个属性上的值重复率很高，则此单个关系可建立聚簇。
  - 检查候选聚簇中的关系
    - 从聚簇中删除经常进行全表扫描的关系
    - 从聚簇中删除更新操作远多于连接操作的关系
    - 不同的聚簇中可能包含相同的关系，一个关系可以在某一个聚簇中，但不能同时加入多个聚簇

确定数据库的存储结构

- 确定数据的存放位置
- 确定系统配置
- 评价物理结构：包括时间效率、空间效率、维护代价和各种用户要求

# 数据库的实施和维护

数据库试运行：逐步增大数据量

运行和维护

- 数据库的转储和恢复
- 数据库的安全性、完整性控制
- 数据库性能的监督、分析和改造
- 数据库的重组织与重构造